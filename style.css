/* ----------------------------- */
/* --- Root Variables & Reset --- */
/* ----------------------------- */
:root {
    /* Color Scheme (Yellow & Green) */
    --primary-yellow: #FFD700; /* Gold */
    --primary-green: #2D6A4F; /* Dark Green */
    --primary-green-darker: #1B4332; /* Very Dark Green */
    --primary-green-lighter: #40916C; /* Medium Green */
    --primary-green-pale: #D8F3DC; /* Pale Green (e.g., own chat) */

    /* Neutrals & Text */
    --text-dark: #212529; /* Nearly Black */
    --text-light: #f8f9fa; /* Nearly White */
    --text-muted: #6c757d; /* Medium Grey */
    --grey-light: #f8f9fa; /* Very Light Grey / Off-White */
    --grey-medium: #e9ecef; /* Light Grey */
    --grey-dark: #6c757d; /* Medium Grey */
    --border-light: #dee2e6;
    --border-dark: #495057;
    --white: #ffffff;
    --black: #000000;

    /* Accents & States */
    --danger-red: #dc3545;
    --danger-red-darker: #b02a37;
    --warning-orange: #fd7e14;
    --link-blue: #1A73E8; /* Google's Blue */
    --link-blue-hover: #1256a0;
    --facebook-blue: #1877F2;

    /* Shadows & Borders */
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.08);
    --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.1);
    --border-radius-sm: 4px;
    --border-radius-md: 8px;
    --border-radius-lg: 12px;

    /* Transitions & Fonts */
    --transition-speed: 0.2s;
    --transition-speed-fast: 0.1s;
    --font-body: 'Roboto', system-ui, -apple-system, "Segoe UI", "Helvetica Neue", Arial, sans-serif;

    /* Specific Elements */
    --header-bg: var(--primary-green-darker);
    --header-text: var(--text-light);
    --nav-bg: var(--white);
    --nav-text: var(--text-muted);
    --nav-active-text: var(--primary-green);
    --nav-border: var(--border-light);
    --button-primary-bg: var(--primary-green);
    --button-primary-text: var(--white);
    --button-primary-hover-bg: var(--primary-green-lighter);
    --input-bg: var(--white);
    --input-border: var(--border-light);
    --input-focus-border: var(--primary-green);
    --input-focus-shadow: rgba(45, 106, 79, 0.15);
    --card-bg: var(--white);
    --card-border: var(--border-light);

    --avatar-size-small: 36px;
    --avatar-size-large: 80px;
    --chat-avatar-size: 32px;
}

*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

/* Custom Scrollbar */
.styled-scrollbar::-webkit-scrollbar { width: 8px; }
.styled-scrollbar::-webkit-scrollbar-track { background: var(--grey-medium); border-radius: 4px; }
.styled-scrollbar::-webkit-scrollbar-thumb { background: var(--grey-dark); border-radius: 4px; }
.styled-scrollbar::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
.styled-scrollbar { scrollbar-width: thin; scrollbar-color: var(--grey-dark) var(--grey-medium); }


/* ----------------------------- */
/* --- General & Body Styles --- */
/* ----------------------------- */
body {
    font-family: var(--font-body);
    background-color: var(--primary-yellow);
    background-image:
        linear-gradient(rgba(0,0,0,0.02) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0,0,0,0.02) 1px, transparent 1px);
    background-size: 20px 20px;
    color: var(--text-dark);
    min-height: 100vh;
    line-height: 1.6;
    padding: 20px 20px 80px 20px; /* Padding bottom >= nav height */
    overflow-x: hidden;
    display: flex;
    justify-content: center;
    align-items: flex-start; /* Align top for auth */
    transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease;
}


/* ----------------------------- */
/* --- Main Containers --- */
/* ----------------------------- */
.auth-container,
.otp-container {
    width: 100%;
    max-width: 450px;
    background-color: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(4px);
    border-radius: var(--border-radius-lg);
    padding: 30px 35px;
    box-shadow: var(--shadow-lg);
    text-align: center;
    margin-top: 3vh;
    border: 1px solid rgba(0,0,0,0.05);
    transition: background-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
}

.app-container {
    width: 100%;
    max-width: 700px;
    margin: 0 auto;
    transition: opacity 0.5s ease-in-out;
}

/* Section handling */
.content-section {
    display: none; /* JS handles visibility */
    padding: 25px;
    background-color: var(--card-bg);
    border-radius: var(--border-radius-md);
    border: 1px solid var(--card-border);
    box-shadow: var(--shadow-md);
    margin-bottom: 20px;
    opacity: 0; /* Start invisible for animation */
    animation: fadeIn 0.4s ease-out forwards;
    min-height: 300px; /* Prevent jarring jumps */
}
.content-section.active-section {
    display: block;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px) scale(0.98); }
    to { opacity: 1; transform: translateY(0) scale(1); }
}

/* Card style */
.card {
    background-color: var(--grey-light);
    border-radius: var(--border-radius-md);
    padding: 20px;
    margin-bottom: 20px;
    border: 1px solid var(--border-light);
    transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
    position: relative;
    overflow: hidden;
}

.card-list .card:last-child { margin-bottom: 0; }

/* ----------------------------- */
/* --- Typography --- */
/* ----------------------------- */
h1 { font-size: clamp(1.8em, 4vw, 2.2em); margin-bottom: 10px; color: var(--primary-green-darker); font-weight: 700; }
h2 { font-size: clamp(1.5em, 3.5vw, 1.8em); margin-bottom: 25px; padding-bottom: 10px; color: var(--primary-green); font-weight: 700; border-bottom: 2px solid var(--primary-yellow); }
h3 { font-size: clamp(1.2em, 3vw, 1.4em); margin-bottom: 15px; color: var(--primary-green-lighter); font-weight: 500; }
h4 { font-size: clamp(1.0em, 2.5vw, 1.15em); margin-bottom: 10px; color: var(--text-dark); font-weight: 500; }
p { margin-bottom: 15px; color: var(--text-muted); font-size: clamp(0.9rem, 2vw, 1rem); }
p.subtitle { font-size: 1.1em; color: var(--text-muted); margin-top: -5px; margin-bottom: 25px;}
label { display: block; margin-bottom: 6px; font-weight: 500; font-size: 0.9em; color: var(--text-dark); text-align: left; }
a { color: var(--link-blue); text-decoration: none; transition: color var(--transition-speed) ease;}
a:hover { color: var(--link-blue-hover); text-decoration: underline; }
.note { font-size: 0.85em; color: var(--text-muted); }
.auth-note { font-size: 0.8em; color: var(--text-muted); margin-top:-5px; margin-bottom: 15px;}
.placeholder-text { font-style: italic; color: var(--text-muted); text-align: center; padding: 15px; }
.highlight-text { color: var(--primary-green); font-weight: 500; }

.warning-note {
    font-size: 0.85em;
    color: var(--danger-red);
    background-color: rgba(220, 53, 69, 0.05);
    border: 1px solid rgba(220, 53, 69, 0.2);
    border-radius: var(--border-radius-sm);
    padding: 8px 12px;
    margin-top: 15px;
    text-align: left;
}
.warning-note strong { color: var(--danger-red-darker); }
.insecure-flag { font-size: 0.7em; color: var(--warning-orange); font-weight: bold; vertical-align: middle; text-transform: uppercase; }

/* ----------------------------- */
/* --- Header & Logo --- */
/* ----------------------------- */
.app-logo { display: block; max-width: 70px; height: auto; margin: 0 auto 15px auto; }

.app-header {
    background-color: var(--header-bg);
    color: var(--header-text);
    padding: 12px 20px;
    border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
    margin-bottom: 20px;
    box-shadow: var(--shadow-md);
}
.app-header .header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    min-height: 40px;
}
.app-header .header-left { flex-grow: 1; }
.app-header .header-left h1 {
    color: var(--white);
    margin: 0;
    font-size: 1.5em;
    border: none;
    font-weight: 700;
    line-height: 1.2;
}
.app-header .header-left p { /* Welcome message */
    color: rgba(255, 255, 255, 0.8);
    margin: 2px 0 0 0;
    font-size: 0.9em;
    line-height: 1;
}
.header-user { margin: 0 10px; } /* Space for avatar */


/* -- Modern Clock Widget -- */
.clock-widget {
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: var(--border-radius-md);
    padding: 5px 12px;
    text-align: right;
    border: 1px solid rgba(255, 255, 255, 0.2);
}
#clockDate {
    display: block;
    font-size: 0.75em;
    color: var(--primary-yellow);
    font-weight: 500;
    opacity: 0.9;
    letter-spacing: 0.5px;
}
#clockTime {
    display: block;
    font-size: 1.2em;
    font-weight: 700;
    color: var(--text-light);
    font-family: monospace;
    letter-spacing: 1px;
}
/* -- Avatars -- */
.avatar-small {
    width: var(--avatar-size-small);
    height: var(--avatar-size-small);
    border-radius: 50%;
    border: 2px solid rgba(255,255,255,0.3);
    object-fit: cover;
}
.avatar-large {
    width: var(--avatar-size-large);
    height: var(--avatar-size-large);
    border-radius: 50%;
    border: 3px solid var(--primary-green-pale);
    box-shadow: var(--shadow-sm);
    margin-bottom: 15px;
    object-fit: cover;
}
.chat-avatar {
    width: var(--chat-avatar-size);
    height: var(--chat-avatar-size);
    border-radius: 50%;
    object-fit: cover;
    border: 1px solid var(--border-light);
}


/* ----------------------------- */
/* --- Forms & Inputs --- */
/* ----------------------------- */
form { margin-top: 20px; }
.form-group { margin-bottom: 20px; position: relative; text-align: left; }

input[type="text"], input[type="email"], input[type="password"],
input[type="tel"], input[type="number"], select, textarea {
    width: 100%;
    padding: 12px 15px;
    padding-right: 35px; /* Space for clear button */
    border: 1px solid var(--input-border);
    border-radius: var(--border-radius-md);
    font-size: 1rem;
    background-color: var(--input-bg);
    color: var(--text-dark);
    transition: border-color var(--transition-speed-fast) ease,
                background-color var(--transition-speed-fast) ease,
                box-shadow var(--transition-speed-fast) ease;
    line-height: 1.5;
}
input::placeholder, textarea::placeholder { color: var(--text-muted); opacity: 0.7; }

input:focus, select:focus, textarea:focus {
    outline: none;
    border-color: var(--input-focus-border);
    box-shadow: 0 0 0 3px var(--input-focus-shadow);
    background-color: var(--input-bg);
}
input.error, select.error, textarea.error {
    border-color: var(--danger-red) !important;
    background-color: rgba(220, 53, 69, 0.02);
}
input.error:focus, select.error:focus, textarea.error:focus {
    box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.15) !important;
}


textarea { resize: vertical; min-height: 100px; padding-right: 15px; }
select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%236c757d'%3E%3Cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 15px center;
    background-size: 16px;
    padding-right: 45px;
    cursor: pointer;
}

.clear-input {
    position: absolute;
    right: 10px;
    top: 30px;
    bottom: 0;
    height: 45px;
    display: flex;
    align-items: center;
    cursor: pointer;
    font-size: 1.5em;
    font-weight: 300;
    color: var(--text-muted);
    padding: 0 5px;
    line-height: 1;
    opacity: 0;
    pointer-events: none;
    transition: color var(--transition-speed-fast) ease, opacity var(--transition-speed-fast) ease;
    z-index: 2;
}
.clear-input:hover { color: var(--text-dark); }

.form-group input:not(:placeholder-shown) ~ .clear-input,
.form-group input:focus ~ .clear-input {
    opacity: 0.6;
    pointer-events: auto;
}
.form-group input:focus ~ .clear-input { opacity: 0.8; }


.form-toggle-link { margin-top: 25px; font-size: 0.9em; text-align: center;}
.social-login-divider { display: flex; align-items: center; text-align: center; margin: 30px 0; color: var(--text-muted); }
.social-login-divider span {
    padding: 0 15px;
    font-size: 0.8em;
    font-weight: 500;
    letter-spacing: 0.5px;
    color: var(--grey-dark);
    background: var(--white);
    position: relative; z-index: 1;
}
.auth-container .social-login-divider span { background-color: rgba(255, 255, 255, 0.9); }

.social-login-divider::before, .social-login-divider::after { content: ''; flex: 1; border-bottom: 1px solid var(--border-light); }

/* ----------------------------- */
/* --- Buttons --- */
/* ----------------------------- */
button, .button-link {
    display: inline-block;
    background-color: var(--button-primary-bg);
    color: var(--button-primary-text);
    border: none;
    cursor: pointer;
    font-size: 1rem;
    font-weight: 500;
    border-radius: var(--border-radius-md);
    padding: 12px 25px;
    margin: 10px 0 5px 0;
    text-align: center;
    box-shadow: var(--shadow-sm), 0 1px 1px rgba(0,0,0,0.05);
    transition: background-color var(--transition-speed-fast) ease,
                transform var(--transition-speed-fast) ease,
                box-shadow var(--transition-speed) ease;
    width: 100%;
    line-height: 1.5;
    -webkit-tap-highlight-color: transparent;
}
button:not(:disabled):hover,
.button-link:not(:disabled):hover {
    background-color: var(--button-primary-hover-bg);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    color: var(--button-primary-text) !important;
    text-decoration: none;
}
button:not(:disabled):active,
.button-link:not(:disabled):active {
    transform: translateY(0);
    background-color: var(--primary-green-darker);
    box-shadow: var(--shadow-sm);
}
button:disabled, .button-link[disabled] {
    background-color: var(--grey-medium);
    color: var(--text-muted);
    cursor: not-allowed;
    box-shadow: none;
    transform: none;
    opacity: 0.7;
}
button:focus-visible, .button-link:focus-visible {
     outline: none;
     box-shadow: 0 0 0 3px var(--input-focus-shadow);
}

button.full-width, .button-link.full-width { width: 100%; }
button.inline, .button-link.inline { width: auto; }
button .icon, .button-link .icon { margin-right: 8px; font-size: 1.1em; vertical-align: middle;}
.send-icon { font-size: 1.2em; transform: translateX(1px); }


button.button-danger, .button-link.button-danger { background-color: var(--danger-red); }
button.button-danger:hover:not(:disabled) { background-color: var(--danger-red-darker); }
button.button-danger:focus-visible { box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.25); }

button.button-secondary, .button-link.button-secondary {
    background-color: var(--grey-dark); color: var(--white); }
button.button-secondary:hover:not(:disabled) { background-color: var(--text-dark); }
button.button-secondary:focus-visible { box-shadow: 0 0 0 3px rgba(108, 117, 125, 0.25); }

button.button-warning, .button-link.button-warning { background-color: var(--warning-orange); color: var(--white);}
button.button-warning:hover:not(:disabled) { background-color: #d96c0b; }
button.button-warning:focus-visible { box-shadow: 0 0 0 3px rgba(253, 126, 20, 0.25); }


#googleSignInButton {
    background-color: var(--white);
    color: var(--text-dark);
    border: 1px solid var(--border-light);
    box-shadow: var(--shadow-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    width: auto;
    margin: 5px auto 10px auto;
    padding: 10px 20px;
}
#googleSignInButton svg { margin-right: 10px; }
#googleSignInButton:hover { background-color: var(--grey-light); border-color: var(--grey-medium); box-shadow: var(--shadow-md); }
#googleSignInButton:focus-visible { box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.3); }

.button-link.facebook { background-color: var(--facebook-blue); }
.button-link.facebook:hover { background-color: #145da0; }


/* ----------------------------- */
/* --- Chat Interface --- */
/* ----------------------------- */
.chat-card { padding: 15px; background-color: var(--grey-light); }
#chatMessages {
    height: clamp(250px, 40vh, 350px);
    overflow-y: auto;
    margin-bottom: 15px;
    padding: 10px; /* Reduce padding to accommodate avatars better */
    background-color: var(--white);
    border-radius: var(--border-radius-md);
    border: 1px solid var(--border-light);
    scroll-behavior: smooth;
    position: relative;
}

.message-container { /* Wrapper for avatar and message bubble */
    display: flex;
    align-items: flex-end; /* Align bubble with bottom of avatar */
    margin-bottom: 12px;
    opacity: 0;
    animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
    max-width: 90%; /* Container takes max width */
}

.message {
    padding: 10px 15px;
    border-radius: 18px;
    line-height: 1.45;
    word-wrap: break-word;
    box-shadow: 0 1px 2px rgba(0,0,0,0.07);
    max-width: 100%; /* Bubble takes full width of its container */
}

.message-container.own {
    margin-left: auto; /* Push to right */
    flex-direction: row-reverse; /* Avatar on the right */
}
.message-container.incoming {
    margin-right: auto; /* Push to left */
    flex-direction: row; /* Avatar on the left */
}


.message-container .chat-avatar {
    margin: 0 8px; /* Space between avatar and bubble */
    align-self: flex-end; /* Ensure avatar aligns with end of bubble */
    flex-shrink: 0;
}

.message.incoming {
    background-color: var(--grey-medium);
    color: var(--text-dark);
    border-bottom-left-radius: 5px;
}
.message.incoming strong { color: var(--primary-green); font-weight: 500; display: block; margin-bottom: 3px; font-size: 0.9em; }

.message.own {
    background: linear-gradient(to bottom right, var(--primary-green-lighter), var(--primary-green));
    color: var(--white);
    text-align: left;
    border-bottom-right-radius: 5px;
}

.message-timestamp {
    display: block;
    font-size: 0.7em;
    color: inherit;
    opacity: 0.6;
    margin-top: 5px;
    text-align: right;
}
.message.own .message-timestamp { color: rgba(255, 255, 255, 0.7); }
.message.incoming .message-timestamp { color: var(--text-muted); }

@keyframes popIn {
  from { transform: scale(0.8) translateY(10px); opacity: 0; }
  to   { transform: scale(1) translateY(0px); opacity: 1; }
}

#chatMessages::after { content: ""; display: table; clear: both; }

#chatMessages > .placeholder-text,
#chatMessages > .loading-message {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: calc(100% - 30px); /* Consider padding */
    text-align: center;
}

.chat-input-area { display: flex; align-items: center; gap: 10px; }
#chatInput { flex-grow: 1; margin: 0; }
#chatSendButton {
    width: 45px; height: 45px; padding: 0;
    flex-shrink: 0; border-radius: 50%;
    background-color: var(--primary-green); color: white;
    font-size: 1.5em; line-height: 45px;
    display: flex; align-items: center; justify-content: center;
    box-shadow: var(--shadow-sm);
}
#chatSendButton:hover:not(:disabled) {
    background-color: var(--primary-green-lighter); transform: scale(1.1); box-shadow: var(--shadow-md);
}
#chatSendButton:active:not(:disabled) { transform: scale(1); background-color: var(--primary-green-darker); }

/* ----------------------------- */
/* --- Status & Loading --- */
/* ----------------------------- */
.error-message {
    color: var(--danger-red); font-size: 0.8em; margin-top: 4px;
    text-align: left; min-height: 1.2em; font-weight: 500;
}
.status-message {
    color: var(--text-muted); font-size: 0.9em; margin-top: 10px;
    text-align: center; min-height: 1.5em; transition: color 0.3s ease, opacity 0.3s ease;
    opacity: 1;
}
.status-message:empty { min-height: 0; margin-top:0; opacity: 0; }

.status-message.success { color: var(--primary-green); font-weight: 500; }
.status-message.error { color: var(--danger-red); font-weight: 500; }
.status-message.loading::before { /* Mini spinner for inline status */
    content: ''; display: inline-block; vertical-align: middle;
    width: 1em; height: 1em;
    border: 2px solid var(--primary-green-pale);
    border-top-color: var(--primary-green);
    border-radius: 50%; margin-right: 8px;
    animation: spin 0.7s linear infinite;
}


.loading-message {
    display: flex; align-items: center; justify-content: center; gap: 10px;
    color: var(--text-muted); font-style: italic; font-size: 0.95em; padding: 20px; text-align: center;
}
.loading-message.loading::before {
    content: ''; display: block; width: 24px; height: 24px;
    border: 3px solid var(--primary-green-pale);
    border-top-color: var(--primary-green);
    border-radius: 50%; animation: spin 0.8s linear infinite;
}
.loading-message:not(.loading)::before { display: none; }
@keyframes spin { to { transform: rotate(360deg); } }

#chatMessages .loading-message.loading { background: rgba(255,255,255,0.8); backdrop-filter: blur(3px); z-index: 5; border-radius: var(--border-radius-md);}

/* ----------------------------- */
/* --- Bottom Navigation --- */
/* ----------------------------- */
#bottomNav {
    display: flex; justify-content: space-around; align-items: stretch;
    background-color: var(--nav-bg); color: var(--nav-text);
    position: fixed; bottom: 0; left: 0; right: 0;
    height: 65px; box-shadow: 0 -3px 10px rgba(0, 0, 0, 0.08);
    z-index: 1000; border-top: 1px solid var(--nav-border);
    transition: background-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease, border-color var(--transition-speed) ease;
}

#bottomNav button {
    background: none; color: inherit; border: none; cursor: pointer;
    font-size: 11px; font-weight: 500; letter-spacing: 0.3px;
    padding: 8px 5px 6px 5px; flex-grow: 1;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    transition: color var(--transition-speed-fast) ease, background-color var(--transition-speed-fast) ease;
    position: relative; overflow: hidden; box-shadow: none; transform: none; border-radius: 0; margin: 0;
    -webkit-tap-highlight-color: transparent;
}
.nav-icon { font-size: 22px; margin-bottom: 2px; line-height: 1; transition: transform 0.2s ease-out; }
.nav-text { line-height: 1.2; }

#bottomNav button:hover {
     background-color: var(--grey-light); color: var(--nav-active-text);
}
#bottomNav button.active { color: var(--nav-active-text); font-weight: 700; }
#bottomNav button.active .nav-icon { transform: scale(1.1); }

#bottomNav button.active::before {
     content: ''; position: absolute; top: 0; left: 15%; right: 15%; height: 3px;
     background-color: var(--primary-green); border-radius: 0 0 3px 3px;
     animation: slideInTop 0.3s ease-out;
}

@keyframes slideInTop {
    from { transform: translateY(-5px); opacity: 0;}
    to { transform: translateY(0); opacity: 1;}
}


/* ----------------------------- */
/* --- Specific Sections Styling --- */
/* ----------------------------- */

.quick-actions {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 15px; margin-bottom: 25px;
}
.quick-actions button {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    gap: 8px; width: 100%; padding: 20px 10px;
    background-color: var(--primary-green-pale); color: var(--primary-green-darker);
    font-weight: 700; border: 1px solid rgba(45, 106, 79, 0.1);
}
.quick-actions button .icon { font-size: 1.8em; margin-bottom: 5px; margin-right: 0;}
.quick-actions button:hover {
    background-color: var(--primary-green-lighter); color: var(--white);
    transform: translateY(-3px); border-color: rgba(45, 106, 79, 0.3);
}

.service-panel { text-align: center; padding: 25px; }
.facebook-link p { margin-bottom: 10px; }
.facebook-link a { margin-bottom: 5px; }
.facebook-link .icon { margin-right: 10px; }
.tracking-area {
    margin-top: 20px; padding: 20px; background-color: var(--white);
    border-radius: var(--border-radius-md); border: 1px solid var(--border-light);
    min-height: 100px;
}
.tracking-area h4 { margin-top: 0; margin-bottom: 15px; border-bottom: 1px solid var(--border-light); padding-bottom: 10px;}
.tracking-area p { text-align: left; }
.status-highlight { font-weight: 700; padding: 3px 6px; border-radius: var(--border-radius-sm); margin-left: 5px; display: inline-block; font-size: 0.9em;}
.status-pending { color: #b54a04; background-color: #fff3e0; }
.status-driver-assigned, .status-picking-up { color: #036a91; background-color: #e0f7fa; }
.status-on-the-way { color: #0d47a1; background-color: #e3f2fd; }
.status-delivered { color: #1b5e20; background-color: #e8f5e9; }
.status-cancelled { color: #b71c1c; background-color: #ffebee; text-decoration: line-through;}

.progress-bar-container { width: 100%; background-color: var(--grey-medium); border-radius: var(--border-radius-sm); overflow: hidden; height: 10px; margin-top: 8px;}
.progress-bar-fill { height: 100%; width: 0%; background-color: var(--link-blue); transition: width 0.5s ease, background-color 0.5s ease; border-radius: var(--border-radius-sm);}


.order-history-item {
    padding: 15px; border: 1px solid var(--border-light);
    border-radius: var(--border-radius-md); margin-bottom: 15px;
    background-color: var(--white); transition: box-shadow var(--transition-speed-fast) ease;
}
.order-history-item:hover { box-shadow: var(--shadow-sm); }
.order-history-item h4 { margin-top: 0; margin-bottom: 8px; color: var(--primary-green); }
.order-history-item p { margin: 4px 0; font-size: 0.9em; }
.order-history-item hr { border: 0; border-top: 1px dashed var(--border-light); margin: 10px 0;}


.account-details .account-avatar-section { text-align: center; margin-bottom: 15px; }
.account-details p { margin: 10px 0; font-size: 0.95em; }
.account-details strong { color: var(--text-muted); font-weight: 500; min-width: 130px; display: inline-block;}
.account-details span { color: var(--text-dark); font-weight: 500; }

.admin-panel { border-top: 1px solid var(--border-light); margin-top: 25px; padding-top: 25px; }
.user-list { max-height: 300px; overflow-y: auto; border: 1px solid var(--border-light); padding: 15px; border-radius: var(--border-radius-md); background-color: var(--grey-light); }
.user-list-items { padding:0; margin:0; }
.user-list li { list-style: none; padding: 10px 0; border-bottom: 1px solid var(--border-light); font-size: 0.9em; line-height: 1.5;}
.user-list li:last-child { border-bottom: none; }
.user-list strong { font-weight: 500; }
.user-list small { font-size: 0.9em; color: var(--text-muted); }


.settings-options { display: flex; flex-direction: column; padding: 0; }
.settings-options hr { border: none; border-top: 1px solid var(--border-light); margin: 0; }
.setting-item {
     display: flex; justify-content: space-between; align-items: center;
     padding: 15px 20px; margin: 0 !important; border: none; background: none; width: 100%; text-align: left;
     border-radius: 0; box-shadow: none; color: var(--text-dark); font-weight: 500;
     transition: background-color var(--transition-speed-fast) ease;
     cursor: pointer;
}
.setting-item:first-child { border-radius: var(--border-radius-md) var(--border-radius-md) 0 0; }
.setting-item:last-child { border-radius: 0 0 var(--border-radius-md) var(--border-radius-md); }
.setting-item:hover:not(label) { background-color: var(--grey-light); }
.setting-item label { flex-grow: 1; cursor: pointer; margin: 0; }
.setting-item.delete-account { color: var(--danger-red); font-weight: 700; }
.setting-item.delete-account:hover { background-color: rgba(220, 53, 69, 0.05); }
.arrow { font-size: 1.3em; color: var(--text-muted); transform: scaleX(0.8); }

.toggle-switch {
    --switch-width: 44px; --switch-height: 24px; --thumb-size: 18px;
    appearance: none; width: var(--switch-width); height: var(--switch-height);
    background-color: var(--grey-medium);
    border-radius: calc(var(--switch-height) / 2);
    position: relative; cursor: pointer; outline: none;
    transition: background-color var(--transition-speed) ease;
    flex-shrink: 0; border: 1px solid var(--border-dark);
}
.toggle-switch::before {
    content: ''; position: absolute; width: var(--thumb-size); height: var(--thumb-size);
    border-radius: 50%; background-color: white;
    top: calc((var(--switch-height) - var(--thumb-size)) / 2 - 1px);
    left: calc((var(--switch-height) - var(--thumb-size)) / 2 - 1px);
    transition: transform var(--transition-speed) ease;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}
.toggle-switch:checked { background-color: var(--primary-green); border-color: var(--primary-green-darker); }
.toggle-switch:checked::before { transform: translateX(calc(var(--switch-width) - var(--switch-height))); }
.toggle-switch:focus-visible { box-shadow: 0 0 0 3px var(--input-focus-shadow); }

.back-button { background: none; border: none; color: var(--link-blue); font-weight: 500; padding: 0 0 15px 0; cursor: pointer; box-shadow: none; width: auto; display: inline-block; margin: 0; }
.back-button:hover { color: var(--link-blue-hover); text-decoration: underline; }

.contact-info p { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
.contact-info .icon { font-size: 1.4em; color: var(--primary-green); min-width: 25px; text-align: center; }
#faqSection .card { margin-top: 20px; }
#faqList > .placeholder-text { margin:20px 0; }
.faq-item { padding: 12px 0; border-bottom: 1px dashed var(--border-light); }
.faq-item:last-child { border-bottom: none; }
.faq-question { font-weight: 500; color: var(--text-dark); cursor: pointer; }
.faq-answer { color: var(--text-muted); padding-left: 20px; margin-top: 5px;}
#feedbackSection { margin-top: 20px;}
.developer-info { text-align: center; font-size: 0.85em; color: var(--text-muted); margin-top: 30px; opacity: 0.8; border-top: 1px solid var(--border-light); padding-top: 20px;}
.developer-info p { margin-bottom: 5px;}

.map-container {
    min-height: 200px; display: flex; flex-direction: column; align-items: center; justify-content: center;
    background-color: var(--grey-light); border: 2px dashed var(--border-light);
    border-radius: var(--border-radius-md); color: var(--text-muted); font-style: italic; padding: 20px; text-align: center;
}
.map-container-small { min-height: 100px; font-size: 0.9em; padding:15px }
.map-container [aria-label*="Map"]::before {
    content: '🗺️'; font-size: 2.5em; display: block; margin-bottom: 10px;
}


/* ----------------------------- */
/* --- Dark Mode --- */
/* ----------------------------- */

body.dark-mode {
    --primary-yellow: #B38B00;
    --primary-green: #40916C;
    --primary-green-darker: #52B788;
    --primary-green-lighter: #95D5B2;
    --primary-green-pale: #2d6a4f;
    --text-dark: #e9ecef;
    --text-light: #212529;
    --text-muted: #adb5bd;
    --grey-light: #343a40;
    --grey-medium: #495057;
    --grey-dark: #6c757d;
    --border-light: #495057;
    --border-dark: #6c757d;
    --white: #1a1a1a; /* Body Background */
    --black: #ffffff;
    --danger-red: #f17c81;
    --danger-red-darker: #e74c52;
    --warning-orange: #ff9800;
    --link-blue: #69b0ff;
    --link-blue-hover: #a4cfff;

    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.5);

    --header-bg: #121212;
    --header-text: #e0e0e0;
    --nav-bg: #1f1f1f;
    --nav-text: var(--text-muted);
    --nav-active-text: var(--primary-yellow);
    --nav-border: #333;
    --button-primary-bg: var(--primary-green);
    --button-primary-text: var(--black);
    --button-primary-hover-bg: var(--primary-green-lighter);
    --input-bg: #2a2a2a;
    --input-border: var(--border-light);
    --input-focus-border: var(--primary-green-lighter);
    --input-focus-shadow: rgba(149, 213, 178, 0.15);
    --card-bg: #242424;
    --card-border: var(--border-light);

    color-scheme: dark;
}

.dark-mode { background-color: var(--white); color: var(--text-dark); }
.dark-mode body { background-image:
        linear-gradient(rgba(255,255,255,0.01) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.01) 1px, transparent 1px);
    background-size: 25px 25px;
}

.dark-mode .auth-container, .dark-mode .otp-container {
    background-color: rgba(30, 30, 30, 0.9); border-color: rgba(255,255,255,0.1);
}
.dark-mode .app-header { background-color: var(--header-bg); }
.dark-mode .app-header .header-left h1 { color: var(--primary-yellow); }
.dark-mode .app-header .header-left p { color: rgba(224, 224, 224, 0.7); }
.dark-mode .clock-widget { background-color: rgba(255, 255, 255, 0.05); border-color: rgba(255, 255, 255, 0.1);}
.dark-mode #clockDate { color: var(--primary-yellow);}
.dark-mode #clockTime { color: var(--text-dark); }
.dark-mode .avatar-small { border-color: rgba(255,255,255,0.1); }
.dark-mode .avatar-large { border-color: var(--primary-green-pale); }
.dark-mode .chat-avatar { border-color: var(--border-dark); }

.dark-mode h1 { color: var(--primary-yellow); }
.dark-mode h2 { color: var(--primary-green-lighter); border-bottom-color: var(--border-light); }
.dark-mode h3 { color: var(--primary-green-lighter); }
.dark-mode h4 { color: var(--text-dark); }
.dark-mode label { color: var(--text-dark); }
.dark-mode .highlight-text { color: var(--primary-green-lighter); }

.dark-mode .content-section, .dark-mode .card {
     background-color: var(--card-bg); border-color: var(--card-border); }

.dark-mode input[type="text"], .dark-mode input[type="email"], .dark-mode input[type="password"],
.dark-mode input[type="tel"], .dark-mode input[type="number"], .dark-mode select, .dark-mode textarea {
    background-color: var(--input-bg); border-color: var(--input-border); color: var(--text-dark);
}
.dark-mode input::placeholder, .dark-mode textarea::placeholder { color: var(--text-muted); opacity: 0.5;}
.dark-mode input:focus, .dark-mode select:focus, .dark-mode textarea:focus {
    border-color: var(--input-focus-border); box-shadow: 0 0 0 3px var(--input-focus-shadow); background-color: var(--input-bg);
}
.dark-mode select { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23adb5bd'%3E%3Cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E"); }
.dark-mode .clear-input { color: var(--grey-dark); }
.dark-mode .clear-input:hover { color: var(--text-dark); }
.dark-mode .social-login-divider { color: var(--text-muted); }
.dark-mode .social-login-divider span { background: var(--card-bg); color: var(--grey-dark);}
.dark-mode .auth-container .social-login-divider span { background: rgba(30, 30, 30, 0.9); }
.dark-mode .social-login-divider::before, .dark-mode .social-login-divider::after { border-bottom-color: var(--border-light); }

.dark-mode button.button-danger, .dark-mode .button-link.button-danger { background-color: var(--danger-red); color: var(--black);}
.dark-mode button.button-danger:hover:not(:disabled) { background-color: var(--danger-red-darker); }
.dark-mode button.button-secondary, .dark-mode .button-link.button-secondary { background-color: var(--grey-dark); color: var(--black);}
.dark-mode button.button-secondary:hover:not(:disabled) { background-color: var(--text-muted); color: var(--text-light)}
.dark-mode button.button-warning, .dark-mode .button-link.button-warning { background-color: var(--warning-orange); color: var(--black); }
.dark-mode button.button-warning:hover:not(:disabled) { background-color: #f57c00; }
.dark-mode #googleSignInButton { background-color: var(--grey-light); color: var(--text-dark); border-color: var(--border-dark); }
.dark-mode #googleSignInButton:hover { background-color: var(--grey-medium); border-color: var(--grey-dark); }
.dark-mode .button-link.facebook { background-color: #3b5998; color:white; }
.dark-mode .button-link.facebook:hover { background-color: #2d4373; }

.dark-mode #bottomNav { background-color: var(--nav-bg); border-top-color: var(--nav-border); }
.dark-mode #bottomNav button { color: var(--nav-text); }
.dark-mode #bottomNav button:hover { background-color: rgba(255, 255, 255, 0.05); color: var(--nav-active-text); }
.dark-mode #bottomNav button.active { color: var(--nav-active-text); }
.dark-mode #bottomNav button.active::before { background-color: var(--nav-active-text); }

.dark-mode #chatMessages { background-color: #1f1f1f; border-color: var(--border-light); }
.dark-mode #chatMessages .placeholder-text,
.dark-mode #chatMessages .loading-message { color: var(--text-muted);}
.dark-mode .message.incoming { background-color: var(--grey-medium); color: var(--text-dark); }
.dark-mode .message.incoming strong { color: var(--primary-green-lighter);}
.dark-mode .message.own { background: linear-gradient(to bottom right, var(--primary-green-pale), #255943); color: var(--text-dark); }
.dark-mode .message-timestamp { opacity: 0.5;}
.dark-mode .message.own .message-timestamp { color: rgba(233, 236, 239, 0.7); }
.dark-mode .message.incoming .message-timestamp { color: var(--text-muted); }
.dark-mode #chatMessages .loading-message.loading { background: rgba(31,31,31,0.8); }
.dark-mode .status-message.loading::before {
    border-color: var(--primary-green-darker);
    border-top-color: var(--primary-green-lighter);
}

.dark-mode .error-message { color: #ff8a80; /* Lighter red for dark mode */ }
.dark-mode .status-message.success { color: var(--primary-green-lighter); }
.dark-mode .status-message.error { color: #ff8a80; }
.dark-mode .loading-message.loading::before { border-color: var(--primary-green-darker); border-top-color: var(--primary-green-lighter); }

.dark-mode .map-container { background-color: var(--grey-medium); border-color: var(--border-dark); color: var(--text-muted); }
.dark-mode .tracking-area { background-color: #1f1f1f; border-color: var(--border-light);}
.dark-mode .status-pending { color: #ffcc80; background-color: rgba(255, 204, 128, 0.1); }
.dark-mode .status-driver-assigned, .dark-mode .status-picking-up { color: #80deea; background-color: rgba(128, 222, 234, 0.1); }
.dark-mode .status-on-the-way { color: #90caf9; background-color: rgba(144, 202, 249, 0.1); }
.dark-mode .status-delivered { color: #a5d6a7; background-color: rgba(165, 214, 167, 0.1); }
.dark-mode .status-cancelled { color: #ef9a9a; background-color: rgba(239, 154, 154, 0.1); }
.dark-mode .progress-bar-container { background-color: var(--grey-dark); }

.dark-mode .quick-actions button { background-color: #2a2a2a; color: var(--primary-green-lighter); border-color: rgba(82, 183, 136, 0.2);}
.dark-mode .quick-actions button:hover { background-color: var(--primary-green-pale); color: var(--text-dark); border-color: rgba(82, 183, 136, 0.4); }
.dark-mode .order-history-item { background-color: var(--grey-medium); border-color: var(--border-dark);}
.dark-mode .user-list { background-color: var(--input-bg); border-color: var(--border-dark); }
.dark-mode .user-list li { border-bottom-color: var(--border-dark); }
.dark-mode .setting-item { color: var(--text-dark); }
.dark-mode .setting-item:hover { background-color: rgba(255,255,255,0.05); }
.dark-mode .setting-item.delete-account { color: var(--danger-red); }
.dark-mode .setting-item.delete-account:hover { background-color: rgba(241, 124, 129, 0.1); }
.dark-mode .toggle-switch { background-color: var(--grey-dark); border-color: var(--border-dark); }
.dark-mode .toggle-switch::before { background-color: var(--input-bg); }
.dark-mode .toggle-switch:checked { background-color: var(--primary-green-lighter); border-color: #95d5b2;}
.dark-mode .contact-info .icon { color: var(--primary-green-lighter); }
.dark-mode .faq-question { color: var(--text-dark); }
.dark-mode .faq-answer { color: var(--text-muted); }
.dark-mode .faq-item { border-bottom-color: var(--border-dark); }
.dark-mode .developer-info { border-top-color: var(--border-dark);}


/* ----------------------------- */
/* --- Responsive Adjustments --- */
/* ----------------------------- */

@media (max-width: 600px) {
    body { padding: 10px 10px 75px 10px; }
    .auth-container, .otp-container { padding: 20px; margin-top: 10px; }
    .app-container { max-width: 100%; margin: 0; }
    .content-section { padding: 15px; border-radius: var(--border-radius-md); }
    .card { padding: 15px; border-radius: var(--border-radius-md); }

    .app-header { padding: 10px 15px; border-radius: var(--border-radius-md) var(--border-radius-md) 0 0; }
    .app-header .header-left h1 { font-size: 1.3em; }
    .app-header .header-left p { font-size: 0.8em; }
    .clock-widget { padding: 4px 8px; }
    #clockTime { font-size: 1em; }
    #clockDate { font-size: 0.65em; }


    h1 { font-size: 1.6em; }
    h2 { font-size: 1.3em; margin-bottom: 20px; }
    h3 { font-size: 1.1em; }

    button, .button-link { padding: 10px 18px; font-size: 0.95rem; }
    input, select, textarea { padding: 10px 12px; padding-right: 30px; font-size: 0.95rem; }
    select { padding-right: 40px; }
    textarea { padding-right: 12px;}
    .clear-input { right: 5px; font-size: 1.3em; height: 40px; top: 28px;}

    #bottomNav { height: 60px; }
    .nav-icon { font-size: 20px; }
    .nav-text { font-size: 10px; }
    #bottomNav button.active::before { height: 2px; }

    #chatMessages { height: clamp(200px, 45vh, 300px); }
    .message-container { max-width: 95%; } /* More space for bubbles on small screens */


    .quick-actions { grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 10px; }
    .quick-actions button { padding: 15px 8px; font-size: 0.9rem; }
    .quick-actions button .icon { font-size: 1.5em; }
}
