<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Click n' Go! - Modern Transportation & Delivery</title>
    <!-- Link Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Link the Refreshed CSS file -->
    <link rel="stylesheet" href="style.css">
    <!-- Favicon links (optional) -->
    <!-- <link rel="icon" href="/favicon.ico" sizes="any"> -->
    <!-- <link rel="icon" href="/favicon.svg" type="image/svg+xml"> -->
</head>
<body>

    <!-- Authentication Section -->
    <main id="authSection" class="auth-container" style="display: block;">
        <img src="logo-placeholder.png" alt="Click n' Go Logo" class="app-logo"> <!-- NOTE: Use your actual logo -->
        <h1>Welcome to Click n' Go!</h1>
        <p class="subtitle">Your Reliable Ride & Delivery Partner</p>

        <!-- Sign Up Form -->
        <div id="signUpForm" style="display: none;">
            <h2>Create Account <span class="insecure-flag"> (Local - EXTREMELY INSECURE DEMO)</span></h2>
            <form id="signupFormElem" novalidate>
                <div class="form-group">
                    <label for="signUpEmail">Email</label>
                    <input type="email" id="signUpEmail" required autocomplete="email" placeholder="you@example.com">
                    <span class="clear-input" data-clear-target="signUpEmail">√ó</span>
                    <div class="error-message" id="signUpEmailError"></div>
                </div>
                <div class="form-group">
                    <label for="signUpPassword">Password</label>
                    <input type="password" id="signUpPassword" required minlength="6" autocomplete="new-password" placeholder="Min. 6 characters">
                    <span class="clear-input" data-clear-target="signUpPassword">√ó</span>
                    <div class="error-message" id="signUpPasswordError"></div>
                </div>
                 <div class="form-group">
                     <label for="signUpLocation">Primary Location</label>
                     <input type="text" id="signUpLocation" placeholder="e.g., City, Barangay" required>
                     <span class="clear-input" data-clear-target="signUpLocation">√ó</span>
                      <div class="error-message" id="signUpLocationError"></div>
                 </div>
                 <div class="form-group">
                    <label for="signUpPhone">Phone Number</label>
                    <input type="tel" id="signUpPhone" placeholder="e.g., 09123456789" required autocomplete="tel">
                    <span class="clear-input" data-clear-target="signUpPhone">√ó</span>
                    <div class="error-message" id="signUpPhoneError"></div>
                 </div>
                 <div class="form-group">
                     <label for="signUpRole">Your Role</label>
                     <select id="signUpRole" required>
                         <option value="" disabled selected>-- Select Role --</option>
                         <option value="customer">Customer</option>
                         <option value="driver">Driver</option>
                         <option value="admin">Admin (Limited Demo)</option>
                     </select>
                     <div class="error-message" id="signUpRoleError"></div>
                 </div>
                <button type="submit" class="button-warning">Sign Up (Insecure Demo)</button>
            </form>
            <p class="form-toggle-link">Already have an account? <a href="#" id="switchToLoginLink">Log In</a></p>
            <p class="warning-note"><strong>CRITICAL WARNING:</strong> This local signup stores data <strong>extremely insecurely</strong> in your browser (including passwords). It is for demonstration purposes ONLY. <strong>DO NOT USE FOR REAL ACCOUNTS.</strong> Use Google Sign-In for better security.</p>
        </div>

        <!-- Login Form -->
        <div id="loginForm"> <!-- Shown initially -->
            <h2>Login</h2>
            <form id="loginFormElem" novalidate>
                 <div class="form-group">
                     <label for="loginEmail">Email</label>
                     <input type="email" id="loginEmail" required autocomplete="email" placeholder="you@example.com">
                     <span class="clear-input" data-clear-target="loginEmail">√ó</span>
                     <div class="error-message" id="loginEmailError"></div>
                 </div>
                 <div class="form-group">
                     <label for="loginPassword">Password</label>
                     <input type="password" id="loginPassword" required autocomplete="current-password" placeholder="Enter password">
                     <span class="clear-input" data-clear-target="loginPassword">√ó</span>
                     <div class="error-message" id="loginPasswordError"></div>
                 </div>
                <div class="error-message" id="loginError" aria-live="assertive"></div> <!-- General login error -->
                <button type="submit">Login (Insecure Demo Account)</button>
            </form>
            <p class="form-toggle-link">Don't have an account? <a href="#" id="switchToSignUpLink">Sign Up (Insecure Demo)</a></p>
             <p class="warning-note">Use local login <strong>ONLY</strong> for demo accounts created via the insecure local signup. Prefer Google Sign-In.</p>
        </div>

        <div class="social-login-divider">
            <span>OR USE SECURE SIGN-IN</span>
        </div>

        <!-- Google Sign-In Button -->
        <button id="googleSignInButton" type="button">
            <svg aria-hidden="true" width="18" height="18" viewBox="0 0 18 18"><path d="M16.51 8.1H8.98v3h4.3c-.18 1-.74 1.48-1.6 2.04v2.01h2.6a7.6 7.6 0 0 0 2.38-5.88c0-.57-.05-.66-.15-1.18z" fill="#4285F4"></path><path d="M8.98 17c2.16 0 3.97-.72 5.3-1.94l-2.6-2a4.8 4.8 0 0 1-7.18-2.54H1.83v2.07A8 8 0 0 0 8.98 17z" fill="#34A853"></path><path d="M4.5 10.52a4.8 4.8 0 0 1 0-3.04V5.41H1.83a8 8 0 0 0 0 7.18l2.67-2.07z" fill="#FBBC05"></path><path d="M8.98 4.18c1.17 0 2.23.4 3.06 1.2l2.3-2.3A8 8 0 0 0 1.83 5.4L4.5 7.49a4.77 4.77 0 0 1 4.48-3.3z" fill="#EA4335"></path></svg>
            Sign in securely with Google
        </button>
         <p class="auth-note">(Secure sign-in and profile storage via Google & Firebase)</p>

        <!-- General Authentication Status Message Area -->
        <div id="authMessage" class="status-message" aria-live="polite"></div>
    </main>

    <!-- OTP Verification Page (Insecure Demo) -->
    <div id="otpPage" style="display: none;" class="centered-page otp-container">
        <h2>Verify Account (Insecure Demo)</h2>
        <p id="otpMessage" class="subtitle">Enter the 6-digit code. For this demo, it's logged in your browser's console.</p>
        <form id="otpForm">
            <div class="form-group">
                <label for="otpInput">OTP Code (Check Console)</label>
                <input type="text" id="otpInput" placeholder="XXXXXX" pattern="\\d{6}" maxlength="6" inputmode="numeric" required>
                <span class="clear-input" data-clear-target="otpInput">√ó</span>
                <div class="error-message" id="otpError" aria-live="assertive"></div>
            </div>
            <button type="button" id="verifyOtpButton">Verify OTP (Insecure)</button>
        </form>
        <div id="otpStatus" class="status-message" aria-live="polite"></div>
         <p class="warning-note"><strong>Warning:</strong> This OTP verification is part of the <strong>highly insecure</strong> local signup demo. It does NOT offer real security.</p>
    </div>

    <!-- Main Application Section -->
    <div id="appSection" class="app-container" style="display: none;">

        <header class="app-header">
             <div class="header-content">
                <div class="header-left">
                    <h1>Click n' Go!</h1>
                    <p id="welcomeMessage">Welcome!</p>
                </div>
                 <div class="header-user">
                     <img id="userAvatarSmall" src="avatar-placeholder.png" alt="User Avatar" class="avatar-small" style="display:none;">
                 </div>
                <div class="header-right">
                    <div id="clockContainer" class="clock-widget">
                        <span id="clockDate" aria-live="off"></span>
                        <span id="clockTime" aria-live="polite">--:--:--</span>
                    </div>
                </div>
             </div>
        </header>

        <!-- Main content area -->
        <main id="appContent">

            <!-- Home Section -->
            <section id="homeSection" class="content-section">
                <h2>Hello, <span id="userEmailDisplay">User</span>!</h2>
                <p>Your reliable ride and delivery partner is ready.</p>
                <div class="quick-actions card">
                     <button data-section="orderItemsSection">
                         <span class="icon">üì¶</span> Book / Track
                     </button>
                     <button data-section="contactSection">
                         <span class="icon">üìû</span> Contact Us
                     </button>
                     <button id="showHistoryButton">
                        <span class="icon">üìú</span> Order History
                    </button>
                </div>
                <!-- Small map preview -->
                <div id="homeMapPreview" class="map-container-small card">
                     <p><strong>Your Location:</strong> <span id="userLocationDisplayHome">Checking...</span></p>
                     <div id="mapPlaceholderSmall" aria-label="Map Preview Area">(Map Placeholder - Live Map Coming Soon!)</div>
                </div>
            </section>

            <!-- Order Items / Service Section -->
            <section id="orderItemsSection" class="content-section">
                 <h2>Ride & Delivery Services</h2>

                 <!-- Customer Panel -->
                 <div id="orderPanel" style="display: none;" class="service-panel card">
                     <h3>Place & Track Orders</h3>
                     <div class="facebook-link">
                         <p>Need a service? Currently, please book via Facebook!</p>
                         <a href="https://www.facebook.com/profile.php?id=61569076123582" target="_blank" rel="noopener noreferrer" class="button-link facebook">
                             <span class="icon">üëç</span> Book on Facebook Now
                         </a>
                         <p class="note"><small>(In-app booking & Firebase-powered order system coming soon!)</small></p>
                      </div>
                      <hr>
                      <h4>Realtime Order Tracking (Firebase Demo)</h4>
                      <p class="note"><small>Place a simulated order. Data will be stored in Firebase RTDB.</small></p>
                      <button id="simulateOrderButton" class="button-secondary inline">Place Simulated Order</button>
                      <div id="trackingPanel" class="tracking-area card" aria-live="polite">
                          <p class="placeholder-text">Place a simulated order to see live tracking details here.</p>
                      </div>
                  </div>

                 <!-- Driver Panel -->
                 <div id="orderRequestPanel" style="display: none;" class="service-panel card">
                      <h3>Incoming Requests (Driver View)</h3>
                      <div id="driverRequestsList">
                         <p class="placeholder-text">(No current requests. Feature under development.)</p>
                         <!-- List of requests will be loaded here from Firebase for drivers -->
                      </div>
                  </div>

                 <!-- Location & Map (Common) -->
                 <div id="locationSection" class="card">
                    <h4>Your Primary Location (from Profile)</h4>
                    <p><span id="userLocationDisplay" class="highlight-text">Not Set</span></p>
                    <div id="mapPlaceholder" class="map-container" aria-label="Map Area">(Map Area - Live Map Integration Needed)</div>
                    <p class="note"><small>Map functionality requires integration with a service like Google Maps API or Leaflet. User location from profile.</small></p>
                </div>

                <!-- Chat Interface (Common) -->
                <div id="chatSection" class="card chat-card">
                     <h3>Live Chat (Powered by Firebase)</h3>
                     <div id="chatMessages" class="chat-messages-area styled-scrollbar" aria-live="polite">
                         <div class="loading-message loading">Loading chat messages...</div>
                     </div>
                     <form id="chatForm" class="chat-input-area" novalidate>
                         <input type="text" id="chatInput" placeholder="Type your message..." autocomplete="off" disabled>
                         <button type="submit" id="chatSendButton" aria-label="Send Message" disabled>
                             <span class="icon send-icon" aria-hidden="true">‚û§</span>
                         </button>
                     </form>
                     <div id="chatStatus" class="status-message" aria-live="polite"></div>
                 </div>
            </section>

            <!-- Order History Section -->
            <section id="orderHistorySection" class="content-section">
                <h2>Order History (from Firebase)</h2>
                <div id="orderList" class="card-list">
                    <div class="loading-message loading">Loading your order history...</div>
                    <!-- Order items will be populated here from Firebase -->
                </div>
            </section>

            <!-- Account Info Section -->
            <section id="accountSection" class="content-section">
                <h2>My Account</h2>
                <div class="account-details card">
                    <div class="account-avatar-section">
                        <img id="accountAvatar" src="avatar-placeholder.png" alt="User Avatar" class="avatar-large">
                    </div>
                    <p><strong>Email:</strong> <span id="accountEmail" class="highlight-text">...</span></p>
                    <p><strong>Display Name:</strong> <span id="accountName">...</span></p>
                    <p><strong>Primary Location:</strong> <span id="accountLocation">...</span></p>
                    <p><strong>Phone:</strong> <span id="accountPhone">...</span></p>
                    <p><strong>Role:</strong> <span id="userRole" class="highlight-text">...</span></p>
                    <p class="note"><strong>User ID (UID):</strong> <span id="accountUid">...</span></p>
                    <p class="note"><strong>Account Type:</strong> <span id="accountType">...</span></p>
                </div>

                <!-- Admin Panel (Only shown if role is admin) -->
                <div id="adminSection" style="display: none;" class="admin-panel card">
                    <h3>Admin: Registered Users (<span class="insecure-flag">Local List Demo ONLY</span>)</h3>
                     <p class="warning-note">Shows only users registered via the <strong>INSECURE</strong> local signup demo. This list is <strong>NOT</strong> from the secure Firebase database.</p>
                    <div id="allUsers" class="user-list styled-scrollbar">
                        <div class="loading-message loading">Loading local demo users...</div>
                    </div>
                </div>

                 <button id="logoutButton" class="button-danger full-width" style="margin-top: 20px;">Logout</button>
            </section>

            <!-- Settings Section -->
            <section id="settingsSection" class="content-section">
                <h2>Settings</h2>
                <div class="settings-options card">
                     <div class="setting-item">
                         <label for="darkModeToggle">Dark Mode</label>
                         <input type="checkbox" id="darkModeToggle" role="switch" class="toggle-switch">
                     </div>
                     <hr>
                     <button class="setting-item" data-section="userPreferencesSection">
                         Language & Preferences <span class="arrow" aria-hidden="true">‚Ä∫</span>
                    </button>
                     <hr>
                     <button id="deleteAccountButton" class="button-danger setting-item delete-account">Delete My Account</button>
                     <p class="warning-note" style="padding: 0 15px 10px 15px;">Deleting your account is irreversible. For Firebase accounts, data will be removed from our database. Local demo accounts are removed from this browser.</p>
                </div>
            </section>

             <!-- User Preferences Sub-Section -->
            <section id="userPreferencesSection" class="content-section">
                 <button data-section="settingsSection" class="back-button">‚Üê Back to Settings</button>
                 <h2>User Preferences (Synced with Firebase)</h2>
                 <div class="card">
                     <div class="form-group">
                         <label for="languageSelect">Interface Language:</label>
                         <select id="languageSelect">
                             <option value="en">English</option>
                             <option value="tl">Tagalog</option>
                             <option value="es" disabled>Spanish (Coming Soon)</option>
                         </select>
                     </div>
                     <!-- More preference options here -->
                     <button id="savePreferencesButton">Save Preferences</button>
                     <div id="userPreferencesStatus" class="status-message" aria-live="polite"></div>
                 </div>
             </section>

            <!-- Contact Us Section -->
            <section id="contactSection" class="content-section">
                 <h2>Contact Us</h2>
                 <p>Need help or have questions? Reach out to us!</p>
                 <div class="contact-info card">
                     <p><span class="icon contact-icon" aria-hidden="true">‚úâÔ∏è</span> <strong>Email:</strong> <a href="mailto:clickngoservice@gmail.com">clickngoservice@gmail.com</a></p>
                     <p><span class="icon contact-icon" aria-hidden="true">üìû</span> <strong>Phone:</strong> <a href="tel:09165540988">0916 554 0988</a></p>
                     <p><span class="icon contact-icon" aria-hidden="true">üåê</span> <strong>Facebook:</strong> <a href="https://www.facebook.com/profile.php?id=61569076123582" target="_blank" rel="noopener noreferrer">Click n' Go Facebook Page</a></p>
                 </div>
                 <p class="note">Support available during business hours. Check Facebook for updates.</p>
            </section>

            <!-- About / Developer Info Section -->
            <section id="developerSection" class="content-section">
                <h2>About Click n' Go!</h2>
                <div class="card">
                    <p>Your dedicated 12-hour motor-taxi and on-demand delivery service based in Isok 1, Boac, Marinduque. We are committed to providing safe, affordable, fast, and reliable transportation solutions connecting you with local couriers in real-time.</p>
                    <p>Click n' Go operates as a team-focused corporation.</p>
                </div>
                <div id="faqSection" class="card">
                    <h3>Frequently Asked Questions</h3>
                    <div id="faqList">
                        <div class="loading-message loading">Loading FAQs...</div>
                        <!-- FAQs will be loaded by JS -->
                    </div>
                </div>
                <div id="feedbackSection" class="card">
                    <h3>Send Us Feedback (Submitted to Firebase)</h3>
                    <p>We value your input! Let us know how we can improve.</p>
                    <form id="feedbackForm" novalidate>
                        <div class="form-group">
                            <label for="feedbackMessage">Your Message</label>
                            <textarea id="feedbackMessage" placeholder="Enter your suggestions or report issues here..." required rows="4" minlength="10"></textarea>
                             <div class="error-message" id="feedbackMessageError"></div>
                        </div>
                        <button type="submit">Submit Feedback</button>
                    </form>
                    <div id="feedbackStatus" class="status-message" aria-live="polite"></div>
                </div>
                 <div class="developer-info">
                    <p>App Concept & Original Development by: JP Team</p>
                    <p>Current Version: Enhanced UI/UX, Advanced JS & Firebase Features by: JP</p>
                    <p><small>Building upon the original application structure.</small></p>
                 </div>
            </section>

        </main> <!-- End Main App Content -->

        <!-- Bottom Navigation Bar -->
        <nav id="bottomNav">
             <button data-section="homeSection" aria-label="Home" class="active">
                <span class="nav-icon" aria-hidden="true">üè†</span><span class="nav-text">Home</span>
             </button>
             <button data-section="orderItemsSection" aria-label="Services">
                <span class="nav-icon" aria-hidden="true">üì¶</span><span class="nav-text">Services</span>
             </button>
             <button data-section="accountSection" aria-label="Account">
                <span class="nav-icon" aria-hidden="true">üë§</span><span class="nav-text">Account</span>
             </button>
             <button data-section="settingsSection" aria-label="Settings">
                <span class="nav-icon" aria-hidden="true">‚öôÔ∏è</span><span class="nav-text">Settings</span>
             </button>
             <button data-section="developerSection" aria-label="About">
                 <span class="nav-icon" aria-hidden="true">‚ÑπÔ∏è</span><span class="nav-text">About</span>
            </button>
        </nav>

    </div> <!-- End App Section -->

    <!-- Load JavaScript Module -->
    <script type="module" src="script.js"></script>

</body>
</html>
